# Requirements Archive: v2.2 Dashboard Upload & Listing UI

**Archived:** 2026-01-30
**Status:** SHIPPED

This is the archived requirements specification for v2.2.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: Populatte

**Defined:** 2026-01-30
**Core Value:** Transform tedious manual data entry into automated form population

## v2.2 Requirements

Requirements for Dashboard Upload & Listing UI. Each maps to roadmap phases.

### API Foundation (APIF)

- [x] **APIF-01**: Batch endpoint factory follows existing `createProjectEndpoints(fetchFn)` pattern
- [x] **APIF-02**: Zod response schemas validate batch list, batch detail, and paginated rows
- [x] **APIF-03**: React Query hooks for batch list, batch detail, batch rows, and upload mutation
- [x] **APIF-04**: API client supports FormData uploads (no hardcoded Content-Type for multipart)
- [x] **APIF-05**: Upload mutation invalidates batch list cache on success

### Upload Modal (UPLD)

- [x] **UPLD-01**: User can open upload modal from project detail page via "Nova Importacao" button
- [x] **UPLD-02**: User can select List Mode or Profile Mode via visual card selector before upload
- [x] **UPLD-03**: User can add files via drag-and-drop zone with visual feedback on dragover
- [x] **UPLD-04**: User can add files via manual file selection fallback (click to browse)
- [x] **UPLD-05**: User sees client-side validation errors (file size >5MB, file count rules per mode)
- [x] **UPLD-06**: User sees selected files list with filename and size before upload
- [x] **UPLD-07**: Upload submit triggers batch creation API call with FormData
- [x] **UPLD-08**: Modal closes and batch list refreshes on successful upload
- [x] **UPLD-09**: User sees toast notification on upload success or failure

### Batch Grid (GRID)

- [x] **GRID-01**: Project detail page displays batch cards in responsive grid layout
- [x] **GRID-02**: Batch card shows creation date, mode badge, and total row count
- [x] **GRID-03**: Batch grid sorts newest-first (matches API default DESC ordering)
- [x] **GRID-04**: User can click batch card to navigate to batch data table page
- [x] **GRID-05**: Empty state component shown when project has no batches (with upload CTA)
- [x] **GRID-06**: Loading skeleton cards (6) displayed during data fetch

### Data Table (DTBL)

- [x] **DTBL-01**: Batch detail page shows batch metadata header (mode, date, total rows)
- [x] **DTBL-02**: Data table generates columns dynamically from batch columnMetadata
- [x] **DTBL-03**: Data table displays paginated rows with server-side pagination (limit/offset)
- [x] **DTBL-04**: Pagination controls (Previous/Next) with "Showing X-Y of Z rows" label
- [x] **DTBL-05**: Smooth page transitions using keepPreviousData in React Query
- [x] **DTBL-06**: Loading skeleton rows displayed during data fetch
- [x] **DTBL-07**: Empty state for batches with zero rows

### Project Detail Page (PROJ)

- [x] **PROJ-01**: Project detail page at /projects/[id] with project name header
- [x] **PROJ-02**: "Nova Importacao" button in project header opens upload modal
- [x] **PROJ-03**: Batch grid section displays below project header

## Future Requirements

Deferred to future milestones. Tracked but not in v2.2 roadmap.

### Enhanced Data Table

- **DTBL-F01**: Column sorting (requires server-side ORDER BY API changes)
- **DTBL-F02**: Column filtering (requires server-side WHERE clause API changes)
- **DTBL-F03**: Column visibility toggle (hide/show columns)
- **DTBL-F04**: Row selection with checkboxes (foundation for bulk actions)
- **DTBL-F05**: Copy cell value to clipboard on click

### Batch Management

- **GRID-F01**: Batch deletion with confirmation dialog (requires soft-delete use case)
- **GRID-F02**: Client-side batch search/filter by date or name
- **GRID-F03**: Export batch data to Excel file

### Upload Enhancements

- **UPLD-F01**: Determinate progress bar during upload
- **UPLD-F02**: Upload cancellation via AbortController
- **UPLD-F03**: Smart mode suggestion based on file count
- **UPLD-F04**: File remove button before upload submission

## Out of Scope

Explicitly excluded. Documented to prevent scope creep.

| Feature | Reason |
|---------|--------|
| Inline editing in data table | Data is immutable (sourced from Excel); re-upload to correct |
| Drag-and-drop row reordering | sourceRowIndex reflects Excel order; breaks traceability |
| Real-time WebSocket upload progress | Files <5MB complete in seconds; overkill |
| Infinite scroll for batches | Batch count is bounded; card grid sufficient |
| Column mapping UI | Belongs to browser extension milestone, not dashboard |
| Batch merging | Batches represent distinct imports; merging loses traceability |
| Virtual scrolling for rows | Server-side pagination is sufficient |

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| APIF-01 | Phase 13 | Complete |
| APIF-02 | Phase 13 | Complete |
| APIF-03 | Phase 13 | Complete |
| APIF-04 | Phase 13 | Complete |
| APIF-05 | Phase 13 | Complete |
| UPLD-01 | Phase 14 | Complete |
| UPLD-02 | Phase 14 | Complete |
| UPLD-03 | Phase 14 | Complete |
| UPLD-04 | Phase 14 | Complete |
| UPLD-05 | Phase 14 | Complete |
| UPLD-06 | Phase 14 | Complete |
| UPLD-07 | Phase 14 | Complete |
| UPLD-08 | Phase 14 | Complete |
| UPLD-09 | Phase 14 | Complete |
| GRID-01 | Phase 15 | Complete |
| GRID-02 | Phase 15 | Complete |
| GRID-03 | Phase 15 | Complete |
| GRID-04 | Phase 15 | Complete |
| GRID-05 | Phase 15 | Complete |
| GRID-06 | Phase 15 | Complete |
| DTBL-01 | Phase 16 | Complete |
| DTBL-02 | Phase 16 | Complete |
| DTBL-03 | Phase 16 | Complete |
| DTBL-04 | Phase 16 | Complete |
| DTBL-05 | Phase 16 | Complete |
| DTBL-06 | Phase 16 | Complete |
| DTBL-07 | Phase 16 | Complete |
| PROJ-01 | Phase 13 | Complete |
| PROJ-02 | Phase 13 | Complete |
| PROJ-03 | Phase 13 | Complete |

**Coverage:**
- v2.2 requirements: 30 total
- Shipped: 30 of 30 (100%)
- Unmapped: 0

---

## Milestone Summary

**Shipped:** 30 of 30 v2.2 requirements
**Adjusted:** None â€” all requirements implemented as specified
**Dropped:** None

---
*Archived: 2026-01-30 as part of v2.2 milestone completion*
